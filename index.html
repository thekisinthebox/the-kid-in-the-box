<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>THE KID IN THE BOX — Retro 90s Web</title>
  <link rel="icon" type="image/png" href="img/favicon.png">

  <meta name="description" content="Personal music site in a deliciously 90s style: glitter, marquees, tiled backgrounds, and a custom cursor."/>
  <link rel="preload" as="audio" href="music.mp3" />
  <!-- Pixel fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet" />

  <style>
    /* === 90s VIBES CORE === */
    :root{
      --primary: #00ffea;
      --accent: #ff00d4;
      --dark: #0a0020;
      --panel: #14003a;
      --lite: #e6e6ff;
      --link: #00e0ff;
    }
    html,body{height:100%}
    body{
      margin:0; color:var(--lite); background:#0b0022;
      /* Layered retro space-grid background */
      background-image:
        radial-gradient(circle at 10% 20%, rgba(255,255,255,.20) 0 1px, transparent 2px),
        radial-gradient(circle at 80% 40%, rgba(255,255,255,.15) 0 1px, transparent 2px),
        radial-gradient(circle at 50% 80%, rgba(255,255,255,.12) 0 1px, transparent 2px),
        repeating-linear-gradient(45deg, rgba(255,0,255,.05) 0 4px, rgba(0,255,255,.05) 4px 8px),
        radial-gradient(ellipse at bottom, #0b0022 0%, #060015 70%, #02000a 100%);
      image-rendering: pixelated;
      font-family: 'VT323', 'Pixel', monospace, system-ui, sans-serif;
      -webkit-font-smoothing: none; text-rendering: optimizeSpeed; font-smooth: never;
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><polygon points="16,2 19,11 29,11 21,17 24,26 16,20 8,26 11,17 3,11 13,11" fill="%23ff00d4" stroke="%2300ffea" stroke-width="2"/></svg>') 16 2, auto;
    }

    .vinyl-img{
      position: absolute;
      width: 64px;
      height: 64px;
      cursor: pointer;
      animation: spinVinyl 1s linear infinite;
      object-fit: contain;
      image-rendering: pixelated;
      user-select: none;
      -webkit-user-drag: none;
      pointer-events: auto;
      border: none;
    }

    /* CRT scanlines overlay */
    body::after{
      content:""; position:fixed; inset:0; pointer-events:none; z-index:0;
      background-image: linear-gradient(rgba(0,0,0,.12) 1px, transparent 1px);
      background-size: 100% 3px; mix-blend-mode: overlay; opacity:.6;
    }
    /* Twinkling parallax stars */
    body::before{
      content:""; position:fixed; inset:-10%; pointer-events:none; z-index:0;
      background:
        radial-gradient(circle at 20% 30%, rgba(255,255,255,.8) 0 1px, transparent 2px),
        radial-gradient(circle at 70% 60%, rgba(255,255,255,.7) 0 1px, transparent 2px),
        radial-gradient(circle at 40% 80%, rgba(255,255,255,.6) 0 1px, transparent 2px);
      animation: drift 30s linear infinite;
    }
    @keyframes drift{ 0%{transform:translateY(0)} 100%{transform:translateY(-20px)} }

    a{color:var(--link); text-decoration: none}
    a:hover{color:#fff; text-shadow:0 0 6px var(--link)}

    .frame{
      max-width: 980px; margin: 24px auto; border: 4px ridge #9cf; padding: 0;
      box-shadow: 0 0 40px #00e0ff55; background: linear-gradient(180deg, #14003a 0, #0a0020 100%);
      position:relative; z-index:2;
    }
    header{ position:relative; padding: 20px 14px; text-align:center; border-bottom: 3px groove #b6f; }
    .title{
      font-family: 'Press Start 2P', monospace;
      font-size: clamp(22px, 3.2vw, 44px); letter-spacing: 1.5px; margin:0; text-transform: uppercase;
      background: linear-gradient(90deg, #ff00d4, #00ffea, #fffd37, #ff00d4);
      background-size: 300% 100%; -webkit-background-clip:text; background-clip:text; color: transparent;
      animation: rainbow 8s linear infinite; text-shadow: 0 0 0 transparent;
    }
    @keyframes rainbow{ from{background-position:0 0} to{background-position:300% 0} }

    .news{ background:#1b0050; border-top:3px ridge #74f; border-bottom:3px ridge #74f; padding:2px 0 }
    .news marquee{font-size:14px}

    .grid{ display:grid; grid-template-columns: 220px 1fr; gap: 0; }
    nav{ border-right:4px ridge #59e; background:#0d0130; padding:14px }
    nav h3{ margin:10px 0; font-size:16px }
    .btn{
      display:block; margin:8px 0; padding:8px 10px; border:3px outset #58f; background:#001a5e; color:#e6f3ff;
      text-transform:uppercase; font-weight:bold; box-shadow: inset 0 0 10px #00e0ff44, 0 0 6px #00e0ff55;
      cursor:pointer;
    }
    .btn:hover{ border-style: inset; filter: brightness(1.2); }

    main{ padding:18px; }
    .card{ border:4px groove #8bf; padding:14px; margin:14px 0; background:#120036aa; backdrop-filter: blur(1px); }
    .blink{ animation: blink 1.2s steps(2, start) infinite; }
    @keyframes blink { to { visibility:hidden } }
    .counter{ font-family: monospace; letter-spacing:1px; background:#0008; display:inline-block; padding:4px 6px; border:3px inset #46f }

    footer{ text-align:center; padding:10px; font-size:12px; color:#cde; border-top:3px ridge #59e }

    .sparkle{ position: fixed; width:6px; height:6px; border-radius:50%; pointer-events:none; mix-blend-mode:screen; opacity:.9 }

    @media (max-width: 780px){
      .grid{ grid-template-columns: 1fr }
      nav{border-right:0; border-bottom:4px ridge #59e}
    }

    /* === Dancing background character === */
    #bgDancer{
      position:fixed; right:2vw; bottom:0; width:min(38vmin, 420px); z-index:1; pointer-events:none; opacity:.28;
      filter: contrast(110%) saturate(110%);
    }
    #bgDancer img{
      width:100%; height:auto; image-rendering: pixelated; transform-origin: 50% 100%;
      animation: dance-bop 1.1s ease-in-out infinite, dance-glow 3.6s linear infinite;
      animation-play-state: paused;
    }
    .playing #bgDancer img{ animation-play-state: running; }
    @keyframes dance-bop{
      0%{ transform: translateY(0) rotate(0deg) }
      25%{ transform: translateY(-8px) rotate(-1deg) }
      50%{ transform: translateY(0) rotate(0.6deg) }
      75%{ transform: translateY(-6px) rotate(-0.8deg) }
      100%{ transform: translateY(0) rotate(0deg) }
    }
    @keyframes dance-glow{
      0%{ filter: drop-shadow(0 0 0px rgba(0,255,234,.0)) }
      50%{ filter: drop-shadow(0 0 14px rgba(0,255,234,.25)) }
      100%{ filter: drop-shadow(0 0 0px rgba(0,255,234,.0)) }
    }

    /* === VINYL DASH game bits === */
    @keyframes spinVinyl { from {transform: rotate(0)} to {transform: rotate(360deg)} }
    .vinyl{
      position:absolute; width:50px; height:50px; border-radius:50%;
      border:3px solid var(--accent);
      background: radial-gradient(circle, #000 40%, var(--accent) 41%, #000 70%);
      cursor:pointer; animation: spinVinyl 1s linear infinite;
    }

    /* === Public Chat styles === */
    .chat-item{ background:#120036aa; border:4px groove #8bf; padding:10px; }
    .chat-head{ display:flex; gap:8px; align-items:baseline; flex-wrap:wrap; }
    .chat-name{ font-weight:bold }
    .chat-time{ opacity:.8; font-size:12px }
    .chat-input{ padding:10px; border:3px inset #59e; background:#0d0130; color:#e6e6ff }
  </style>
</head>

<body>
  <!-- Background dancing character (replace img path with your file) -->
  <div id="bgDancer"><img src="img/dancer.png" alt="THE KID IN THE BOX — dancing"/></div>

  <div class="frame">
    <header>
      <h1 class="title">THE KID IN THE BOX</h1>
      <div class="news">
        <marquee behavior="scroll" scrollamount="6" direction="left">
          <span class="blink">★</span> NEW SINGLE OUT NOW — STREAM ON ALL PLATFORMS — FOLLOW FOR MORE MUSIC —
          <span class="blink">★</span>
        </marquee>
      </div>
    </header>

    <div class="grid">
      <nav>
        <h3>Social</h3>
        <a class="btn" href="https://open.spotify.com/" target="_blank" rel="noopener">Spotify</a>
        <a class="btn" href="https://music.apple.com/au/artist/the-kid-in-the-box/1793599382" target="_blank" rel="noopener">Apple Music</a>
        <a class="btn" href="https://www.youtube.com/@thekidinthebox?si=Gh7D2dWkX7tai-Fq" target="_blank" rel="noopener">YouTube</a>
        <a class="btn" href="https://instagram.com/thekidinthebox/" target="_blank" rel="noopener">Instagram</a>
        <a class="btn" href="mailto:alaahero88@gmail.com" target="_blank" rel="noopener">Email</a>

        <h3>Goodies</h3>
        <a class="btn" href="#shows">Shows</a>
        <a class="btn" href="#music">Music</a>
        <a class="btn" href="#arcade">Arcade</a>
        <a class="btn" href="#public-chat">Public Chat</a>
        <a class="btn" href="#gallery">Gallery</a>
        <a class="btn" href="#contact">Contact</a>

        <p style="margin-top:14px">Visitors: <span id="counter" class="counter">000001</span></p>
      </nav>

      <main>
        <section class="card" id="intro">
          <h2 style="font-family:'Press Start 2P', monospace; font-size:18px">Welcome to my corner of the web</h2>
          <p>This site is proudly <em>maximalist</em>. Click around, play the tunes, sign the ~imaginary~ guestbook.</p>
          <p>Music should auto-start after your first click/tap (browsers block loud autoplay). Use the control at the top-right.</p>
        </section>

        <section class="card" id="music">
          <h2>Featured Track</h2>
          <audio id="player" preload="auto" src="music.mp3"></audio>
          <p>check out my music it is really good <code></code>  <code></code>.</p>
          <div style="border:4px ridge #8bf; box-shadow:0 0 25px #00e0ff55; background:#0d0130; padding:6px;">
  <iframe
    width="100%"
    height="315"
    src="https://www.youtube.com/embed/iCsEXdCGPag"
    title="THE KID IN THE BOX — Official Music Video"
    frameborder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
    allowfullscreen>
  </iframe>
</div>


        </section>

        <section class="card" id="shows">
          <h2>Shows</h2>
          <ul>
            <li> — Melbourne, Secret House Party (DM for address)</li>
            <li> — </li>
            <li> —  </li>
          </ul>
        </section>

        <section class="card" id="arcade">
          <h2>🎮 VINYL DASH</h2>
          <p>Click the spinning vinyls before time runs out! Each level gets faster.</p>
          <button id="startGame" class="btn" type="button">Start Game</button>
          <div id="gameArea" style="position:relative; width:100%; height:300px; border:4px ridge #8bf; background:#0d0130; overflow:hidden; margin-top:12px;"></div>
          <p>Score: <span id="score">0</span> | Time: <span id="timer">30</span>s | Level: <span id="level">1</span></p>
        </section>

        <!-- === PUBLIC CHAT (no login) === -->
        <section class="card" id="public-chat">
          <h2>🗣️ Public Chat — share your feelings</h2>
          <div style="display:grid; gap:8px; max-width:720px">
            <input id="pcName" class="chat-input" placeholder="Your name (or nickname)" maxlength="24" />
            <textarea id="pcText" class="chat-input" rows="3" placeholder="What are you feeling right now?" maxlength="300"></textarea>
            <div style="display:flex; gap:8px; align-items:center">
              <button class="btn" id="pcSend" type="button">Post</button>
              <small id="pcHint" style="opacity:.8">Be kind / بلا قلة ادب ولا احد يسب. Max 300 chars. No login needed.</small>
            </div>
          </div>
          <div id="pcFeed"
               style="margin-top:14px; max-height:380px; overflow:auto; display:grid; gap:10px; border:4px ridge #8bf; padding:10px; background:#0d0130;">
          </div>
        </section>

        <section class="card" id="gallery">
          <h2>Gallery</h2>
          <p>here some cute pictures of me </picture> <code></code> </p>
          <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(160px,1fr)); gap:10px">
            <img src="img/1.png" alt="retro" style="width:100%; border:4px outset #69f"/>
            <img src="img/2.png" alt="retro" style="width:100%; border:4px outset #69f"/>
            <img src="img/3.png" alt="retro" style="width:100%; border:4px outset #69f"/>
          </div>
        </section>

        <section class="card" id="contact">
          <h2>Contact</h2>
          <p>For bookings/collabs: <a href="mailto:alaahero88@gmail.com">alaahero88@gmail.com</a></p>
        </section>
      </main>
    </div>

    <footer>
      <p>© <span id="year"></span> ALHUR — Made with ✨ and a lot of <span class="blink">&lt;marquee&gt;</span>.</p>
    </footer>
  </div>

  <!-- Floating music control (top-right) -->
  <button id="musicBtn" title="Play/Pause" style="position:fixed; top:14px; right:14px; z-index:9999; border:3px outset #58f; background:#001a5e; color:#e6f3ff; padding:10px 12px; font-weight:bold; text-transform:uppercase; box-shadow: inset 0 0 10px #00e0ff44, 0 0 6px #00e0ff55;">▶ Music</button>

  <script>
    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Fake hit counter via localStorage
    (function(){
      const key = 'alhur-counter-v1';
      const n = (Number(localStorage.getItem(key))||1) + Math.floor(Math.random()*3+1);
      localStorage.setItem(key, n);
      const el = document.getElementById('counter');
      if (el) el.textContent = String(n).padStart(6,'0');
    })();

    // Music autoplay (after first interaction) + button control
    const player = document.getElementById('player');
    const btn = document.getElementById('musicBtn');
    let interacted = false;

    function playPause(){
      if(!player) return;
      if(player.paused){
        player.play().catch(()=>{});
        btn.textContent = '❚❚ Pause';
      } else{
        player.pause();
        btn.textContent = '▶ Music';
      }
    }
    btn.addEventListener('click', ()=>{ interacted = true; playPause(); });
    window.addEventListener('pointerdown', ()=>{
      if(!interacted && player){
        interacted = true;
        player.play().catch(()=>{});
        btn.textContent='❚❚ Pause';
      }
    }, {once:true});
    if (player){
      player.addEventListener('ended', ()=>{
        player.currentTime = 0;
        player.play().catch(()=>{}); // loop
      });
    }

    // Sync dancer animation with music play/pause
    const dancerWrap = document.getElementById('bgDancer');
    function syncDancer(){
      if(!dancerWrap || !player) return;
      document.body.classList.toggle('playing', !player.paused);
    }
    if(player){
      player.addEventListener('play', syncDancer);
      player.addEventListener('pause', syncDancer);
      window.addEventListener('load', syncDancer);
    }

    // 90s mouse sparkle trail
    (function(){
      const colors = ['#ff00d4','#00ffea','#fffd37'];
      let lastX=-999, lastY=-999;
      window.addEventListener('mousemove', (e)=>{
        if(Math.hypot(e.clientX-lastX, e.clientY-lastY) < 8) return; // throttle
        lastX=e.clientX; lastY=e.clientY;
        const s = document.createElement('div');
        s.className = 'sparkle';
        s.style.left = (e.clientX - 3) + 'px';
        s.style.top = (e.clientY - 3) + 'px';
        s.style.background = colors[Math.floor(Math.random()*colors.length)];
        s.style.boxShadow = '0 0 12px currentColor, 0 0 24px currentColor';
        document.body.appendChild(s);
        setTimeout(()=>{ s.style.transition='all .6s ease-out'; s.style.transform='translateY(-12px) scale(0)'; s.style.opacity='0'; }, 10);
        setTimeout(()=> s.remove(), 700);
      });
    })();

    // Cheeky 90s right-click blocker (optional)
    document.addEventListener('contextmenu', (e)=>{
      e.preventDefault();
      alert('No stealing my pixels! (jk)\n— ALHUR');
    });

    // === VINYL DASH — 5-level mini game with pictures ===
    (function(){
      const gameArea = document.getElementById("gameArea");
      const scoreEl = document.getElementById("score");
      const timerEl = document.getElementById("timer");
      const levelEl = document.getElementById("level");
      const startBtn = document.getElementById("startGame");

      // Replace these paths with your own images in /img/
      const vinylImages = [
        "img/desk.png",
        "img/star.png",
        "img/cas.png",
        "img/vinyl.png",
        "img/guitar.png"
      ];

      let score = 0, time = 30, level = 1, playing = false;
      let timerInterval = null, vinylInterval = null;

      function createVinyl() {
        if (!gameArea) return;
        const img = document.createElement("img");
        img.className = "vinyl-img";
        img.src = vinylImages[Math.floor(Math.random()*vinylImages.length)];

        const size = 64;
        img.style.width = size + "px";
        img.style.height = size + "px";
        img.style.left = Math.random() * (gameArea.clientWidth - size) + "px";
        img.style.top  = Math.random() * (gameArea.clientHeight - size) + "px";

        gameArea.appendChild(img);

        img.addEventListener("click", () => {
          score += 10;
          scoreEl.textContent = String(score);
          img.remove();
        });

        setTimeout(() => img.remove(), 1800);
      }

      function clearLoops(){
        if (vinylInterval) { clearInterval(vinylInterval); vinylInterval = null; }
        if (timerInterval) { clearInterval(timerInterval); timerInterval = null; }
      }

      function setupLevelLoops(){
        const spawnMs = Math.max(250, 1000 - level * 150); // faster each level
        vinylInterval = setInterval(createVinyl, spawnMs);
        timerInterval = setInterval(() => {
          time--;
          timerEl.textContent = String(time);
          if (time <= 0) nextLevel();
        }, 1000);
      }

      function startGame() {
        if (playing) return;
        playing = true;
        score = 0; level = 1; time = 30;
        scoreEl.textContent = "0";
        levelEl.textContent = "1";
        timerEl.textContent = "30";
        gameArea.innerHTML = "";
        startBtn.textContent = "Playing...";
        startBtn.disabled = true;

        clearLoops();
        setupLevelLoops();
      }

      function nextLevel() {
        clearLoops();
        gameArea.innerHTML = "";

        if (level < 5) {
          level++;
          levelEl.textContent = String(level);
          time = Math.max(10, 30 - (level * 3));
          timerEl.textContent = String(time);
          startBtn.textContent = "Level " + level + " — Start";
          startBtn.disabled = false;
          playing = false;
          alert("Level " + (level - 1) + " complete! Next one gets harder!");
        } else {
          alert("🎉 You finished all levels! Final Score: " + score);
          startBtn.textContent = "Restart Game";
          startBtn.disabled = false;
          playing = false;
          score = 0; level = 1; time = 30;
          scoreEl.textContent = "0"; levelEl.textContent = "1"; timerEl.textContent = "30";
        }
      }

      startBtn.addEventListener("click", ()=>{
        if (!playing) startGame();
        else nextLevel();
      });
    })();
  </script>

  <!-- ===== Firebase (no-auth public chat) ===== -->
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore-compat.js"></script>
  <script>
    // === Replace with your Firebase config ===
    const firebaseConfig = {
      apiKey: "AIzaSyDTDgv-kqr1GSWguVUBP5NDZvc5U4Z1jSw",
      authDomain: "kid-in-the-box.firebaseapp.com",
      projectId: "kid-in-the-box",
      appId: "513322178741:web:555149700b0a3e5d7a46fc"
    };
    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const pcDb = firebase.firestore();

    // Elements
    const pcName = document.getElementById('pcName');
    const pcText = document.getElementById('pcText');
    const pcSend = document.getElementById('pcSend');
    const pcFeed = document.getElementById('pcFeed');
    const pcHint = document.getElementById('pcHint');

    // Persist nickname locally
    pcName.value = localStorage.getItem('public-chat-name') || '';
    pcName.addEventListener('input', () => localStorage.setItem('public-chat-name', pcName.value));

    // Simple cooldown (15s)
    function pcCanPost(){
      const last = Number(localStorage.getItem('public-chat-last') || 0);
      return (Date.now() - last) > 15000;
    }
    function pcMarkPosted(){ localStorage.setItem('public-chat-last', Date.now()); }

    // Render message
    function pcRender(d){
      const wrap = document.createElement('div');
      wrap.className = 'chat-item';

      const head = document.createElement('div'); head.className = 'chat-head';
      const name = document.createElement('span'); name.className = 'chat-name'; name.textContent = d.name || 'Anon';
      const time = document.createElement('span'); time.className = 'chat-time';
      const t = d.createdAt?.toDate ? d.createdAt.toDate() : new Date();
      time.textContent = '• ' + t.toLocaleString();

      head.appendChild(name); head.appendChild(time);

      const body = document.createElement('p'); body.style.margin='6px 0 0';
      body.textContent = d.text || '';

      wrap.appendChild(head); wrap.appendChild(body);
      return wrap;
    }

    // Live feed
    pcDb.collection('publicChat').orderBy('createdAt','desc').limit(100)
      .onSnapshot(snap=>{
        pcFeed.innerHTML = '';
        snap.forEach(doc=> pcFeed.appendChild( pcRender(doc.data()) ));
      });

    // Post
    pcSend.addEventListener('click', async ()=>{
      const name = pcName.value.trim().slice(0,24);
      const text = pcText.value.trim().slice(0,300);

      if (!name || !text){ pcHint.textContent = 'Please enter a name and a message.'; return; }
      if (!pcCanPost()){ pcHint.textContent = 'You can post again in a few seconds…'; return; }

      await pcDb.collection('publicChat').add({
        name, text,
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      });

      pcText.value = '';
      pcMarkPosted();
      pcHint.textContent = 'Sent ✔';
      setTimeout(()=> pcHint.textContent = 'Be kind. Max 300 chars. No login needed.', 2000);
    });
  </script>
</body>
</html>
